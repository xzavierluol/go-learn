- redo log: 重做日志
  - redo log是InnoDB存储引擎层的日志
  - 记录的是数据修改之后的值，不管事务是否提交都会记录下来
  - 先写日志，再写磁盘

  - 多版本并发控制原理分析之MySQL的日志机制
    - undo log: 回滚日志
      - InnoDB存储引擎层的日志
      - 保存事务发生之前的数据版本
      - 可以用于回滚
      - 同时可以提供多版本并发控制下的读(MVCC)，也即非锁定读
    - bin log: 归档日志
      - 主从复制
      - 二进制形式记录
      - 用于数据库的基于时间点的还原
      - 提交事务记录binlog，定时刷盘

- 隐式字段
  - DB_TRX_ID
    - 6byte
    - 记录创建这条记录时，最后一次修改该记录的事务ID
  - DB_ROLL_PTR
    - 7byte, 回滚指针
    - 指向这条记录的上一个版本(存储于rollback segment回滚段里)
  - DB_ROW_ID
    - 6byte，隐含的自增ID
    - 如果数据表没有主键，会自动以DB_ROW_ID产生一个聚簇索引
  - 创建版本号
  - 删除版本号

- ![多版本并发控制原理](./%E5%A4%9A%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E4%B9%8B%E9%9A%90%E5%BC%8F%E5%AD%97%E6%AE%B5.png)